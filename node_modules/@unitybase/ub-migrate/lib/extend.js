const {EntityRepository, EntityFormat} = require('./metadata')

/**
 * @type {Container}
 */
let container

module.exports = {
  EntityRepository,
  EntityFormat,
  registerEntity() {
    container.registerEntity.apply(container, arguments)
  },

  /**
   * For backward compatibility
   * @obsolete
   */
  container: {
    registerFileType: (fileType, md) => container.registerFileType(fileType, md),
    getFileType: (entityName) => container.getFileType(entityName),
    registerRepository: (entityName, repository) => container.registerRepository(entityName, repository),
    getRepository: (entityName) => container.getRepository(entityName),
    getAllRepositories: () => container.getAllRepositories()
  },

  /**
   * Do not use directly in models, it is for backward comatibility!
   * @private
   */
  setContainer(c) {
    container = c
  }
}
