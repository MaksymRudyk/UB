const {NonCachedEntityRepository, EntityFormat} = require('../metadata')

module.exports = function (container) {
  container.registerFileType(
    'settings',
    new EntityFormat()
      .key('settingKey')
      .caption('name')
      .defaultValue('description', val => val.name)
      .copy('type', 'description', 'defaultValue', 'settingValue')
      .wrapAsEntity('ubs_settings')
  )

  container.registerRepository(
    new NonCachedEntityRepository(
      'ubs_settings',
      ['settingKey'],
      ['type'],
      ['defaultValue', 'settingValue', 'name', 'description'],
      undefined,
      ['settingValue']
    )
  )
}
